**Nats** реализует паттерн Publish-Subscribe один ко многим
Паблишер отправляет сообщение на Сабжект и все активные сабскрайберы слушают этот сабжект и получают сообщение

Сабскрайберы также могу подписываться на несколько Сабжектов используя reg exp

Этот паттерн "один ко многим" иногда называют "расширением" (fan-out).

![[Pasted image 20240827004420.png]]

Сообщение состоит из 
- сабжект
- полезная нагрузка в виде массива байт
- Любое число заголовков
- Необязательного поля адреса для ответа ('reply' address field).

Сообщения имеют максимальный размер, который устанавливается в конфигурации сервера с помощью параметра `max_payload`. По умолчанию размер составляет 1 МБ, но его можно увеличить до 64 МБ при необходимости (хотя мы рекомендуем ограничивать максимальный размер сообщения чем-то более разумным, например, 8 МБ).

Сабскрайберы получают сообщения из Сабжектов. Сообщения хранятся в Сабжекте пока их не прочтут

Подписчики могут использовать подстановочные символы, такие как * и >, для соответствия одному токену или для соответствия окончанию темы.

Этот простой пошаговый пример демонстрирует несколько способов, с помощью которых подписчики слушают темы, а издатели отправляют сообщения на определённые темы.

![[Pasted image 20240827005946.png]]

